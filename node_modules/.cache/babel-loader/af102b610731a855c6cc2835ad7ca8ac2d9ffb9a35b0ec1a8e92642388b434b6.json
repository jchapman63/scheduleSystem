{"ast":null,"code":"// This file will contain two functions getSchedule and setSchedule\n// I will update Schedule to contain an ID.\n// Maybe I should just make a full app model here, it will be able to query into the database with getSchedule, createSchedule, and setSchedule methods\n// Okay so they have an ID, but I only can access the ID from the querySnapShot in _generateSchedules, so I could just add their ID to the class.\nimport Course from \"./Course\";\nimport Schedule from \"./Schedule\";\nimport { database } from \"../firebase\";\n\n// The manager of the Database and The UI\nclass AppModel {\n  constructor() {\n    // query with id, replace with new schedule, if successful, update in AppModel\n    this.updateSchedule = (id, schedule) => {\n      const scheduleRef = database.collection(\"schedules\").doc(id);\n      scheduleRef.set(schedule.toObject()).then(() => {\n        console.log(\"successfully updated schedule\");\n\n        // update AppModel\n        for (var i = 0; i < this.schedules.length; i++) {\n          var fromList = this.schedules[i];\n          if (fromList.id === schedule.id) {\n            this.schedules[i] = schedule;\n          }\n        }\n      }).catch(error => {\n        console.error(\"Error replacing schedule in Firestore: \", error);\n      });\n    };\n    // add a schedule to the database, and to this instance if successful.\n    this.addSchedule = schedule => {\n      var scheduleData = schedule.toObject();\n      database.collection(\"schedules\").add(scheduleData).then(docRef => {\n        console.log(\"added a schedule with the ID: \", docRef.id);\n        // add the DB id to the schedule\n        schedule.createID(docRef.id);\n\n        // add to AppModel\n        this.schedules.push(schedule);\n      }).catch(error => {\n        console.log(\"Error adding schedule: \", error);\n      });\n    };\n    // remove from database, if successful, remove from AppModel.\n    this.removeSchedule = id => {\n      // still need to code\n      database.collection(\"schdules\").doc(id).delete().then(() => {\n        console.log(\"Schedule deleted successfully!\");\n      }).catch(error => {\n        console.log(\"Error deleting schedule: \", error);\n      });\n    };\n    // for testing purposes\n    this.logScheduleData = () => {\n      for (var i = 0; i < this.schedules.length; i++) {\n        const schedule = this.schedules[i];\n        console.log(\"current schedule: \", schedule.name);\n        console.log(\"its courses: \", schedule.courses);\n      }\n    };\n    this.schedules = [];\n    this._generateSchedules();\n  }\n\n  // helper function for instantiating the AppModel\n  async _generateSchedules() {\n    // retrieving all of the collection\n    await database.collection(\"schedules\").get().then(querySnapshot => {\n      querySnapshot.forEach(doc => {\n        // print to check doc data with id\n        // console.log(doc.id, \" => \", doc.data);\n\n        // grab the schedule data\n        const scheduleData = doc.data();\n\n        // checking courses exist\n        // console.log(\"The scheduleData\", doc.data());\n\n        // create new schedule from data\n        // const schedule = new Schedule(scheduleData.name, scheduleData.courses);\n        const schedule = new Schedule(scheduleData.name, []);\n        schedule.createID(doc.id);\n        // check that the object was made\n        // console.log(\"making sure the schedule got made\", schedule);\n\n        // get courses and create them\n        scheduleData.courses.forEach(courseData => {\n          const newCourse = new Course(courseData.courseName, courseData.courseCode, courseData.sectionNumber, courseData.creditHours, courseData.meetFrequencies, courseData.meetTime, courseData.meetingRoom, courseData.professor);\n\n          // add each course to the schedule\n          schedule.addCourse(newCourse);\n\n          // console.log(\"the created schedule object: \", schedules[0]);\n        });\n        // add schedule to the AppModel\n        this.schedules.push(schedule);\n        console.log(this.schedules);\n      });\n    }).catch(error => {\n      console.log(\"This error occurred grabbing documents: \", error);\n    });\n  }\n\n  // return a schedule from the list by querying for its ID\n  getScheduleById(id) {\n    for (var i = 0; i < this.schedules.length; i++) {\n      var schedule = this.schedules[i];\n      if (schedule.id === id) {\n        return schedule;\n      }\n    }\n  }\n}\nexport default AppModel;","map":{"version":3,"names":["Course","Schedule","database","AppModel","constructor","updateSchedule","id","schedule","scheduleRef","collection","doc","set","toObject","then","console","log","i","schedules","length","fromList","catch","error","addSchedule","scheduleData","add","docRef","createID","push","removeSchedule","delete","logScheduleData","name","courses","_generateSchedules","get","querySnapshot","forEach","data","courseData","newCourse","courseName","courseCode","sectionNumber","creditHours","meetFrequencies","meetTime","meetingRoom","professor","addCourse","getScheduleById"],"sources":["/Users/jordanchap20/Desktop/github/ScheduleSystem/scheduleSystem/src/JsModules/AppModel.js"],"sourcesContent":["// This file will contain two functions getSchedule and setSchedule\n// I will update Schedule to contain an ID.\n// Maybe I should just make a full app model here, it will be able to query into the database with getSchedule, createSchedule, and setSchedule methods\n// Okay so they have an ID, but I only can access the ID from the querySnapShot in _generateSchedules, so I could just add their ID to the class.\nimport Course from \"./Course\";\nimport Schedule from \"./Schedule\";\nimport { database } from \"../firebase\";\n\n// The manager of the Database and The UI\nclass AppModel {\n  constructor() {\n    this.schedules = [];\n    this._generateSchedules();\n  }\n\n  // helper function for instantiating the AppModel\n  async _generateSchedules() {\n    // retrieving all of the collection\n    await database\n      .collection(\"schedules\")\n      .get()\n      .then((querySnapshot) => {\n        querySnapshot.forEach((doc) => {\n          // print to check doc data with id\n          // console.log(doc.id, \" => \", doc.data);\n\n          // grab the schedule data\n          const scheduleData = doc.data();\n\n          // checking courses exist\n          // console.log(\"The scheduleData\", doc.data());\n\n          // create new schedule from data\n          // const schedule = new Schedule(scheduleData.name, scheduleData.courses);\n          const schedule = new Schedule(scheduleData.name, []);\n          schedule.createID(doc.id);\n          // check that the object was made\n          // console.log(\"making sure the schedule got made\", schedule);\n\n          // get courses and create them\n          scheduleData.courses.forEach((courseData) => {\n            const newCourse = new Course(\n              courseData.courseName,\n              courseData.courseCode,\n              courseData.sectionNumber,\n              courseData.creditHours,\n              courseData.meetFrequencies,\n              courseData.meetTime,\n              courseData.meetingRoom,\n              courseData.professor\n            );\n\n            // add each course to the schedule\n            schedule.addCourse(newCourse);\n\n            // console.log(\"the created schedule object: \", schedules[0]);\n          });\n          // add schedule to the AppModel\n          this.schedules.push(schedule);\n          console.log(this.schedules);\n        });\n      })\n      .catch((error) => {\n        console.log(\"This error occurred grabbing documents: \", error);\n      });\n  }\n\n  // return a schedule from the list by querying for its ID\n  getScheduleById(id) {\n    for (var i = 0; i < this.schedules.length; i++) {\n      var schedule = this.schedules[i];\n      if (schedule.id === id) {\n        return schedule;\n      }\n    }\n  }\n\n  // query with id, replace with new schedule, if successful, update in AppModel\n  updateSchedule = (id, schedule) => {\n    const scheduleRef = database.collection(\"schedules\").doc(id);\n\n    scheduleRef\n      .set(schedule.toObject())\n      .then(() => {\n        console.log(\"successfully updated schedule\");\n\n        // update AppModel\n        for (var i = 0; i < this.schedules.length; i++) {\n          var fromList = this.schedules[i];\n          if (fromList.id === schedule.id) {\n            this.schedules[i] = schedule;\n          }\n        }\n      })\n      .catch((error) => {\n        console.error(\"Error replacing schedule in Firestore: \", error);\n      });\n  };\n\n  // add a schedule to the database, and to this instance if successful.\n  addSchedule = (schedule) => {\n    var scheduleData = schedule.toObject();\n\n    database\n      .collection(\"schedules\")\n      .add(scheduleData)\n      .then((docRef) => {\n        console.log(\"added a schedule with the ID: \", docRef.id);\n        // add the DB id to the schedule\n        schedule.createID(docRef.id);\n\n        // add to AppModel\n        this.schedules.push(schedule);\n      })\n      .catch((error) => {\n        console.log(\"Error adding schedule: \", error);\n      });\n  };\n\n  // remove from database, if successful, remove from AppModel.\n  removeSchedule = (id) => {\n    // still need to code\n    database\n      .collection(\"schdules\")\n      .doc(id)\n      .delete()\n      .then(() => {\n        console.log(\"Schedule deleted successfully!\");\n      })\n      .catch((error) => {\n        console.log(\"Error deleting schedule: \", error);\n      });\n  };\n\n  // for testing purposes\n  logScheduleData = () => {\n    for (var i = 0; i < this.schedules.length; i++) {\n      const schedule = this.schedules[i];\n      console.log(\"current schedule: \", schedule.name);\n      console.log(\"its courses: \", schedule.courses);\n    }\n  };\n}\n\nexport default AppModel;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}