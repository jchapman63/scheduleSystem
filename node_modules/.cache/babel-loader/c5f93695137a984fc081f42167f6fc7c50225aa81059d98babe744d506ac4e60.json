{"ast":null,"code":"// This file will contain two functions getSchedule and setSchedule\n// I will update Schedule to contain an ID.\n// Maybe I should just make a full app model here, it will be able to query into the database with getSchedule, createSchedule, and setSchedule methods\n// Okay so they have an ID, but I only can access the ID from the querySnapShot in _generateSchedules, so I could just add their ID to the class.\nimport Course from \"./Course\";\nimport Schedule from \"./Schedule\";\nimport { database } from \"../firebase\";\n\n// The manager of the Database and The UI\nclass AppModel {\n  constructor() {\n    // for testing purposes\n    this.logScheduleData = () => {\n      // console.log(this.schedules);\n      console.log(this);\n      // for (var i = 0; i < this.schedules.length; i++) {\n      //   const schedule = this.schedules[i];\n      //   console.log(\"current schedule: \", schedule.name);\n      //   console.log(\"its courses: \", schedule.courses);\n      // }\n    };\n    this.schedules = [];\n    this._generateSchedules();\n  }\n\n  // helper function for instantiating the AppModel\n  async _generateSchedules() {\n    // retrieving all of the collection\n    await database.collection(\"schedules\").get().then(querySnapshot => {\n      querySnapshot.forEach(doc => {\n        // print to check doc data with id\n        // console.log(doc.id, \" => \", doc.data);\n\n        // grab the schedule data\n        const scheduleData = doc.data();\n\n        // checking courses exist\n        // console.log(\"The scheduleData\", doc.data());\n\n        // create new schedule from data\n        // const schedule = new Schedule(scheduleData.name, scheduleData.courses);\n        const schedule = new Schedule(scheduleData.name, []);\n        schedule.createID(doc.id);\n        // check that the object was made\n        // console.log(\"making sure the schedule got made\", schedule);\n\n        // get courses and create them\n        scheduleData.courses.forEach(courseData => {\n          const newCourse = new Course(courseData.courseName, courseData.courseCode, courseData.sectionNumber, courseData.creditHours, courseData.meetFrequencies, courseData.meetTime, courseData.meetingRoom, courseData.professor);\n\n          // add each course to the schedule\n          schedule.addCourse(newCourse);\n\n          // console.log(\"the created schedule object: \", schedules[0]);\n        });\n        // add schedule to the AppModel\n        this.schedules.push(schedule);\n        console.log(this.schedules);\n      });\n    }).catch(error => {\n      console.log(\"This error occurred grabbing documents: \", error);\n    });\n  }\n\n  // return a schedule from the list by querying for its ID\n  getScheduleById(id) {\n    for (var i = 0; i < this.schedules.length; i++) {\n      var schedule = this.schedules[i];\n      if (schedule.id === id) {\n        return schedule;\n      }\n    }\n  }\n\n  // query with id, replace with new schedule, if successful, update in AppModel\n  updateSchedule(id, schedule) {\n    const scheduleRef = database.collection(\"schedules\").doc(id);\n    scheduleRef.set(schedule.toObject()).then(() => {\n      console.log(\"successfully updated schedule\");\n\n      // update AppModel\n      for (var i = 0; i < this.schedules.length; i++) {\n        var fromList = this.schedules[i];\n        if (fromList.id === schedule.id) {\n          this.schedules[i] = schedule;\n        }\n      }\n    }).catch(error => {\n      console.error(\"Error replacing schedule in Firestore: \", error);\n    });\n  }\n\n  // add a schedule to the database, and to this instance if successful.\n  addSchedule(schedule) {\n    var scheduleData = schedule.toObject();\n    database.collection(\"schedules\").add(scheduleData).then(docRef => {\n      console.log(\"added a schedule with the ID: \", docRef.id);\n      // add the DB id to the schedule\n      schedule.createID(docRef.id);\n\n      // add to AppModel\n      this.schedules.push(schedule);\n    }).catch(error => {\n      console.log(\"Error adding schedule: \", error);\n    });\n  }\n\n  // remove from database, if successful, remove from AppModel.\n  removeSchedule(id) {\n    // still need to code\n    database.collection(\"schdules\").doc(id).delete().then(() => {\n      console.log(\"Schedule deleted successfully!\");\n    }).catch(error => {\n      console.log(\"Error deleting schedule: \", error);\n    });\n  }\n}\nexport default AppModel;","map":{"version":3,"names":["Course","Schedule","database","AppModel","constructor","logScheduleData","console","log","schedules","_generateSchedules","collection","get","then","querySnapshot","forEach","doc","scheduleData","data","schedule","name","createID","id","courses","courseData","newCourse","courseName","courseCode","sectionNumber","creditHours","meetFrequencies","meetTime","meetingRoom","professor","addCourse","push","catch","error","getScheduleById","i","length","updateSchedule","scheduleRef","set","toObject","fromList","addSchedule","add","docRef","removeSchedule","delete"],"sources":["/Users/jordanchap20/Desktop/github/ScheduleSystem/scheduleSystem/src/JsModules/AppModel.js"],"sourcesContent":["// This file will contain two functions getSchedule and setSchedule\n// I will update Schedule to contain an ID.\n// Maybe I should just make a full app model here, it will be able to query into the database with getSchedule, createSchedule, and setSchedule methods\n// Okay so they have an ID, but I only can access the ID from the querySnapShot in _generateSchedules, so I could just add their ID to the class.\nimport Course from \"./Course\";\nimport Schedule from \"./Schedule\";\nimport { database } from \"../firebase\";\n\n// The manager of the Database and The UI\nclass AppModel {\n  constructor() {\n    this.schedules = [];\n    this._generateSchedules();\n  }\n\n  // helper function for instantiating the AppModel\n  async _generateSchedules() {\n    // retrieving all of the collection\n    await database\n      .collection(\"schedules\")\n      .get()\n      .then((querySnapshot) => {\n        querySnapshot.forEach((doc) => {\n          // print to check doc data with id\n          // console.log(doc.id, \" => \", doc.data);\n\n          // grab the schedule data\n          const scheduleData = doc.data();\n\n          // checking courses exist\n          // console.log(\"The scheduleData\", doc.data());\n\n          // create new schedule from data\n          // const schedule = new Schedule(scheduleData.name, scheduleData.courses);\n          const schedule = new Schedule(scheduleData.name, []);\n          schedule.createID(doc.id);\n          // check that the object was made\n          // console.log(\"making sure the schedule got made\", schedule);\n\n          // get courses and create them\n          scheduleData.courses.forEach((courseData) => {\n            const newCourse = new Course(\n              courseData.courseName,\n              courseData.courseCode,\n              courseData.sectionNumber,\n              courseData.creditHours,\n              courseData.meetFrequencies,\n              courseData.meetTime,\n              courseData.meetingRoom,\n              courseData.professor\n            );\n\n            // add each course to the schedule\n            schedule.addCourse(newCourse);\n\n            // console.log(\"the created schedule object: \", schedules[0]);\n          });\n          // add schedule to the AppModel\n          this.schedules.push(schedule);\n          console.log(this.schedules);\n        });\n      })\n      .catch((error) => {\n        console.log(\"This error occurred grabbing documents: \", error);\n      });\n  }\n\n  // return a schedule from the list by querying for its ID\n  getScheduleById(id) {\n    for (var i = 0; i < this.schedules.length; i++) {\n      var schedule = this.schedules[i];\n      if (schedule.id === id) {\n        return schedule;\n      }\n    }\n  }\n\n  // query with id, replace with new schedule, if successful, update in AppModel\n  updateSchedule(id, schedule) {\n    const scheduleRef = database.collection(\"schedules\").doc(id);\n\n    scheduleRef\n      .set(schedule.toObject())\n      .then(() => {\n        console.log(\"successfully updated schedule\");\n\n        // update AppModel\n        for (var i = 0; i < this.schedules.length; i++) {\n          var fromList = this.schedules[i];\n          if (fromList.id === schedule.id) {\n            this.schedules[i] = schedule;\n          }\n        }\n      })\n      .catch((error) => {\n        console.error(\"Error replacing schedule in Firestore: \", error);\n      });\n  }\n\n  // add a schedule to the database, and to this instance if successful.\n  addSchedule(schedule) {\n    var scheduleData = schedule.toObject();\n\n    database\n      .collection(\"schedules\")\n      .add(scheduleData)\n      .then((docRef) => {\n        console.log(\"added a schedule with the ID: \", docRef.id);\n        // add the DB id to the schedule\n        schedule.createID(docRef.id);\n\n        // add to AppModel\n        this.schedules.push(schedule);\n      })\n      .catch((error) => {\n        console.log(\"Error adding schedule: \", error);\n      });\n  }\n\n  // remove from database, if successful, remove from AppModel.\n  removeSchedule(id) {\n    // still need to code\n    database\n      .collection(\"schdules\")\n      .doc(id)\n      .delete()\n      .then(() => {\n        console.log(\"Schedule deleted successfully!\");\n      })\n      .catch((error) => {\n        console.log(\"Error deleting schedule: \", error);\n      });\n  }\n\n  // for testing purposes\n  logScheduleData = () => {\n    // console.log(this.schedules);\n    console.log(this);\n    // for (var i = 0; i < this.schedules.length; i++) {\n    //   const schedule = this.schedules[i];\n    //   console.log(\"current schedule: \", schedule.name);\n    //   console.log(\"its courses: \", schedule.courses);\n    // }\n  };\n}\n\nexport default AppModel;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAOA,MAAM,MAAM,UAAU;AAC7B,OAAOC,QAAQ,MAAM,YAAY;AACjC,SAASC,QAAQ,QAAQ,aAAa;;AAEtC;AACA,MAAMC,QAAQ,CAAC;EACbC,WAAWA,CAAA,EAAG;IA4Hd;IAAA,KACAC,eAAe,GAAG,MAAM;MACtB;MACAC,OAAO,CAACC,GAAG,CAAC,IAAI,CAAC;MACjB;MACA;MACA;MACA;MACA;IACF,CAAC;IApIC,IAAI,CAACC,SAAS,GAAG,EAAE;IACnB,IAAI,CAACC,kBAAkB,EAAE;EAC3B;;EAEA;EACA,MAAMA,kBAAkBA,CAAA,EAAG;IACzB;IACA,MAAMP,QAAQ,CACXQ,UAAU,CAAC,WAAW,CAAC,CACvBC,GAAG,EAAE,CACLC,IAAI,CAAEC,aAAa,IAAK;MACvBA,aAAa,CAACC,OAAO,CAAEC,GAAG,IAAK;QAC7B;QACA;;QAEA;QACA,MAAMC,YAAY,GAAGD,GAAG,CAACE,IAAI,EAAE;;QAE/B;QACA;;QAEA;QACA;QACA,MAAMC,QAAQ,GAAG,IAAIjB,QAAQ,CAACe,YAAY,CAACG,IAAI,EAAE,EAAE,CAAC;QACpDD,QAAQ,CAACE,QAAQ,CAACL,GAAG,CAACM,EAAE,CAAC;QACzB;QACA;;QAEA;QACAL,YAAY,CAACM,OAAO,CAACR,OAAO,CAAES,UAAU,IAAK;UAC3C,MAAMC,SAAS,GAAG,IAAIxB,MAAM,CAC1BuB,UAAU,CAACE,UAAU,EACrBF,UAAU,CAACG,UAAU,EACrBH,UAAU,CAACI,aAAa,EACxBJ,UAAU,CAACK,WAAW,EACtBL,UAAU,CAACM,eAAe,EAC1BN,UAAU,CAACO,QAAQ,EACnBP,UAAU,CAACQ,WAAW,EACtBR,UAAU,CAACS,SAAS,CACrB;;UAED;UACAd,QAAQ,CAACe,SAAS,CAACT,SAAS,CAAC;;UAE7B;QACF,CAAC,CAAC;QACF;QACA,IAAI,CAAChB,SAAS,CAAC0B,IAAI,CAAChB,QAAQ,CAAC;QAC7BZ,OAAO,CAACC,GAAG,CAAC,IAAI,CAACC,SAAS,CAAC;MAC7B,CAAC,CAAC;IACJ,CAAC,CAAC,CACD2B,KAAK,CAAEC,KAAK,IAAK;MAChB9B,OAAO,CAACC,GAAG,CAAC,0CAA0C,EAAE6B,KAAK,CAAC;IAChE,CAAC,CAAC;EACN;;EAEA;EACAC,eAAeA,CAAChB,EAAE,EAAE;IAClB,KAAK,IAAIiB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAAC9B,SAAS,CAAC+B,MAAM,EAAED,CAAC,EAAE,EAAE;MAC9C,IAAIpB,QAAQ,GAAG,IAAI,CAACV,SAAS,CAAC8B,CAAC,CAAC;MAChC,IAAIpB,QAAQ,CAACG,EAAE,KAAKA,EAAE,EAAE;QACtB,OAAOH,QAAQ;MACjB;IACF;EACF;;EAEA;EACAsB,cAAcA,CAACnB,EAAE,EAAEH,QAAQ,EAAE;IAC3B,MAAMuB,WAAW,GAAGvC,QAAQ,CAACQ,UAAU,CAAC,WAAW,CAAC,CAACK,GAAG,CAACM,EAAE,CAAC;IAE5DoB,WAAW,CACRC,GAAG,CAACxB,QAAQ,CAACyB,QAAQ,EAAE,CAAC,CACxB/B,IAAI,CAAC,MAAM;MACVN,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;;MAE5C;MACA,KAAK,IAAI+B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAAC9B,SAAS,CAAC+B,MAAM,EAAED,CAAC,EAAE,EAAE;QAC9C,IAAIM,QAAQ,GAAG,IAAI,CAACpC,SAAS,CAAC8B,CAAC,CAAC;QAChC,IAAIM,QAAQ,CAACvB,EAAE,KAAKH,QAAQ,CAACG,EAAE,EAAE;UAC/B,IAAI,CAACb,SAAS,CAAC8B,CAAC,CAAC,GAAGpB,QAAQ;QAC9B;MACF;IACF,CAAC,CAAC,CACDiB,KAAK,CAAEC,KAAK,IAAK;MAChB9B,OAAO,CAAC8B,KAAK,CAAC,yCAAyC,EAAEA,KAAK,CAAC;IACjE,CAAC,CAAC;EACN;;EAEA;EACAS,WAAWA,CAAC3B,QAAQ,EAAE;IACpB,IAAIF,YAAY,GAAGE,QAAQ,CAACyB,QAAQ,EAAE;IAEtCzC,QAAQ,CACLQ,UAAU,CAAC,WAAW,CAAC,CACvBoC,GAAG,CAAC9B,YAAY,CAAC,CACjBJ,IAAI,CAAEmC,MAAM,IAAK;MAChBzC,OAAO,CAACC,GAAG,CAAC,gCAAgC,EAAEwC,MAAM,CAAC1B,EAAE,CAAC;MACxD;MACAH,QAAQ,CAACE,QAAQ,CAAC2B,MAAM,CAAC1B,EAAE,CAAC;;MAE5B;MACA,IAAI,CAACb,SAAS,CAAC0B,IAAI,CAAChB,QAAQ,CAAC;IAC/B,CAAC,CAAC,CACDiB,KAAK,CAAEC,KAAK,IAAK;MAChB9B,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAE6B,KAAK,CAAC;IAC/C,CAAC,CAAC;EACN;;EAEA;EACAY,cAAcA,CAAC3B,EAAE,EAAE;IACjB;IACAnB,QAAQ,CACLQ,UAAU,CAAC,UAAU,CAAC,CACtBK,GAAG,CAACM,EAAE,CAAC,CACP4B,MAAM,EAAE,CACRrC,IAAI,CAAC,MAAM;MACVN,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;IAC/C,CAAC,CAAC,CACD4B,KAAK,CAAEC,KAAK,IAAK;MAChB9B,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAE6B,KAAK,CAAC;IACjD,CAAC,CAAC;EACN;AAYF;AAEA,eAAejC,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}