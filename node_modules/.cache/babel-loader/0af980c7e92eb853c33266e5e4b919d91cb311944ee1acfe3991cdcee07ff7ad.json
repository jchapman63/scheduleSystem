{"ast":null,"code":"// This file will contain two functions getSchedule and setSchedule\n// I will update Schedule to contain an ID.\n// Maybe I should just make a full app model here, it will be able to query into the database with getSchedule, createSchedule, and setSchedule methods\n// Okay so they have an ID, but I only can access the ID from the querySnapShot in _generateSchedules, so I could just add their ID to the class.\nimport Course from \"./Course\";\nimport Schedule from \"./Schedule\";\nimport { database } from \"../firebase\";\n\n// The manager of the Database and The UI\nclass AppModel {\n  constructor() {\n    // for testing purposes\n    this.logScheduleData = () => {\n      // console.log(this.schedules);\n      // console.log(this);\n      for (var i = 0; i < this.schedules.length; i++) {\n        const schedule = this.schedules[i];\n        console.log(\"current schedule: \", schedule.name);\n        console.log(\"its courses: \", schedule.courses);\n      }\n    };\n    this.schedules = [];\n    this._generateSchedules();\n  }\n\n  // helper function for instantiating the AppModel\n  async _generateSchedules() {\n    // retrieving all of the collection\n    await database.collection(\"schedules\").get().then(querySnapshot => {\n      querySnapshot.forEach(doc => {\n        // print to check doc data with id\n        // console.log(doc.id, \" => \", doc.data);\n\n        // grab the schedule data\n        const scheduleData = doc.data();\n\n        // checking courses exist\n        // console.log(\"The scheduleData\", doc.data());\n\n        // create new schedule from data\n        // const schedule = new Schedule(scheduleData.name, scheduleData.courses);\n        const schedule = new Schedule(scheduleData.name, []);\n        schedule.createID(doc.id);\n        // check that the object was made\n        // console.log(\"making sure the schedule got made\", schedule);\n\n        // get courses and create them\n        scheduleData.courses.forEach(courseData => {\n          const newCourse = new Course(courseData.courseName, courseData.courseCode, courseData.sectionNumber, courseData.creditHours, courseData.meetFrequencies, courseData.meetTime, courseData.meetingRoom, courseData.professor);\n\n          // add each course to the schedule\n          schedule.addCourse(newCourse);\n\n          // console.log(\"the created schedule object: \", schedules[0]);\n        });\n        // add schedule to the AppModel\n        this.schedules.push(schedule);\n        console.log(this.schedules);\n      });\n    }).catch(error => {\n      console.log(\"This error occurred grabbing documents: \", error);\n    });\n  }\n\n  // return a schedule from the list by querying for its ID\n  getScheduleById(id) {\n    for (var i = 0; i < this.schedules.length; i++) {\n      var schedule = this.schedules[i];\n      if (schedule.id === id) {\n        return schedule;\n      }\n    }\n  }\n\n  // query with id, replace with new schedule, if successful, update in AppModel\n  updateSchedule(id, schedule) {\n    const scheduleRef = database.collection(\"schedules\").doc(id);\n    scheduleRef.set(schedule.toObject()).then(() => {\n      console.log(\"successfully updated schedule\");\n\n      // update AppModel\n      for (var i = 0; i < this.schedules.length; i++) {\n        var fromList = this.schedules[i];\n        if (fromList.id === schedule.id) {\n          this.schedules[i] = schedule;\n        }\n      }\n    }).catch(error => {\n      console.error(\"Error replacing schedule in Firestore: \", error);\n    });\n  }\n\n  // add a schedule to the database, and to this instance if successful.\n  addSchedule(schedule) {\n    var scheduleData = schedule.toObject();\n    database.collection(\"schedules\").add(scheduleData).then(docRef => {\n      console.log(\"added a schedule with the ID: \", docRef.id);\n      // add the DB id to the schedule\n      schedule.createID(docRef.id);\n\n      // add to AppModel\n      this.schedules.push(schedule);\n    }).catch(error => {\n      console.log(\"Error adding schedule: \", error);\n    });\n  }\n\n  // remove from database, if successful, remove from AppModel.\n  removeSchedule(id) {\n    // still need to code\n    database.collection(\"schdules\").doc(id).delete().then(() => {\n      console.log(\"Schedule deleted successfully!\");\n    }).catch(error => {\n      console.log(\"Error deleting schedule: \", error);\n    });\n  }\n}\nexport default AppModel;","map":{"version":3,"names":["Course","Schedule","database","AppModel","constructor","logScheduleData","i","schedules","length","schedule","console","log","name","courses","_generateSchedules","collection","get","then","querySnapshot","forEach","doc","scheduleData","data","createID","id","courseData","newCourse","courseName","courseCode","sectionNumber","creditHours","meetFrequencies","meetTime","meetingRoom","professor","addCourse","push","catch","error","getScheduleById","updateSchedule","scheduleRef","set","toObject","fromList","addSchedule","add","docRef","removeSchedule","delete"],"sources":["/Users/jordanchap20/Desktop/github/ScheduleSystem/scheduleSystem/src/JsModules/AppModel.js"],"sourcesContent":["// This file will contain two functions getSchedule and setSchedule\n// I will update Schedule to contain an ID.\n// Maybe I should just make a full app model here, it will be able to query into the database with getSchedule, createSchedule, and setSchedule methods\n// Okay so they have an ID, but I only can access the ID from the querySnapShot in _generateSchedules, so I could just add their ID to the class.\nimport Course from \"./Course\";\nimport Schedule from \"./Schedule\";\nimport { database } from \"../firebase\";\n\n// The manager of the Database and The UI\nclass AppModel {\n  constructor() {\n    this.schedules = [];\n    this._generateSchedules();\n  }\n\n  // helper function for instantiating the AppModel\n  async _generateSchedules() {\n    // retrieving all of the collection\n    await database\n      .collection(\"schedules\")\n      .get()\n      .then((querySnapshot) => {\n        querySnapshot.forEach((doc) => {\n          // print to check doc data with id\n          // console.log(doc.id, \" => \", doc.data);\n\n          // grab the schedule data\n          const scheduleData = doc.data();\n\n          // checking courses exist\n          // console.log(\"The scheduleData\", doc.data());\n\n          // create new schedule from data\n          // const schedule = new Schedule(scheduleData.name, scheduleData.courses);\n          const schedule = new Schedule(scheduleData.name, []);\n          schedule.createID(doc.id);\n          // check that the object was made\n          // console.log(\"making sure the schedule got made\", schedule);\n\n          // get courses and create them\n          scheduleData.courses.forEach((courseData) => {\n            const newCourse = new Course(\n              courseData.courseName,\n              courseData.courseCode,\n              courseData.sectionNumber,\n              courseData.creditHours,\n              courseData.meetFrequencies,\n              courseData.meetTime,\n              courseData.meetingRoom,\n              courseData.professor\n            );\n\n            // add each course to the schedule\n            schedule.addCourse(newCourse);\n\n            // console.log(\"the created schedule object: \", schedules[0]);\n          });\n          // add schedule to the AppModel\n          this.schedules.push(schedule);\n          console.log(this.schedules);\n        });\n      })\n      .catch((error) => {\n        console.log(\"This error occurred grabbing documents: \", error);\n      });\n  }\n\n  // return a schedule from the list by querying for its ID\n  getScheduleById(id) {\n    for (var i = 0; i < this.schedules.length; i++) {\n      var schedule = this.schedules[i];\n      if (schedule.id === id) {\n        return schedule;\n      }\n    }\n  }\n\n  // query with id, replace with new schedule, if successful, update in AppModel\n  updateSchedule(id, schedule) {\n    const scheduleRef = database.collection(\"schedules\").doc(id);\n\n    scheduleRef\n      .set(schedule.toObject())\n      .then(() => {\n        console.log(\"successfully updated schedule\");\n\n        // update AppModel\n        for (var i = 0; i < this.schedules.length; i++) {\n          var fromList = this.schedules[i];\n          if (fromList.id === schedule.id) {\n            this.schedules[i] = schedule;\n          }\n        }\n      })\n      .catch((error) => {\n        console.error(\"Error replacing schedule in Firestore: \", error);\n      });\n  }\n\n  // add a schedule to the database, and to this instance if successful.\n  addSchedule(schedule) {\n    var scheduleData = schedule.toObject();\n\n    database\n      .collection(\"schedules\")\n      .add(scheduleData)\n      .then((docRef) => {\n        console.log(\"added a schedule with the ID: \", docRef.id);\n        // add the DB id to the schedule\n        schedule.createID(docRef.id);\n\n        // add to AppModel\n        this.schedules.push(schedule);\n      })\n      .catch((error) => {\n        console.log(\"Error adding schedule: \", error);\n      });\n  }\n\n  // remove from database, if successful, remove from AppModel.\n  removeSchedule(id) {\n    // still need to code\n    database\n      .collection(\"schdules\")\n      .doc(id)\n      .delete()\n      .then(() => {\n        console.log(\"Schedule deleted successfully!\");\n      })\n      .catch((error) => {\n        console.log(\"Error deleting schedule: \", error);\n      });\n  }\n\n  // for testing purposes\n  logScheduleData = () => {\n    // console.log(this.schedules);\n    // console.log(this);\n    for (var i = 0; i < this.schedules.length; i++) {\n      const schedule = this.schedules[i];\n      console.log(\"current schedule: \", schedule.name);\n      console.log(\"its courses: \", schedule.courses);\n    }\n  };\n}\n\nexport default AppModel;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}