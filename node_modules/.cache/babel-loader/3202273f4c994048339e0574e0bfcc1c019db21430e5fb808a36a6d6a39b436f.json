{"ast":null,"code":"// This file will contain two functions getSchedule and setSchedule\n// I will update Schedule to contain an ID.\n// Maybe I should just make a full app model here, it will be able to query into the database with getSchedule, createSchedule, and setSchedule methods\n// Okay so they have an ID, but I only can access the ID from the querySnapShot in _generateSchedules, so I could just add their ID to the class.\nimport Course from \"./Course\";\nimport Schedule from \"./Schedule\";\nimport { database } from \"../firebase\";\n\n// NOTE: All methods must follow arrow syntax to bind this.  This is determined at run time when handling events.\n// The manager of the Database and The UI\nclass AppModel {\n  constructor() {\n    // return a schedule from the list by querying for its ID\n    this.getScheduleById = id => {\n      for (var i = 0; i < this.schedules.length; i++) {\n        var schedule = this.schedules[i];\n        if (schedule.id === id) {\n          return schedule;\n        }\n      }\n    };\n    // query with id, replace with new schedule, if successful, update in AppModel\n    this.updateSchedule = (id, schedule) => {\n      console.log(schedule.toObject());\n      console.log(id);\n      const scheduleRef = database.collection(\"schedules\").doc(id);\n      scheduleRef.set(schedule.toObject()).then(() => {\n        console.log(\"successfully updated schedule\");\n\n        // update AppModel\n        for (var i = 0; i < this.schedules.length; i++) {\n          var fromList = this.schedules[i];\n          if (fromList.id === schedule.id) {\n            this.schedules[i] = schedule;\n          }\n        }\n      }).catch(error => {\n        console.error(\"Error replacing schedule in Firestore: \", error);\n      });\n    };\n    // add a schedule to the database, and to this instance if successful.\n    this.addSchedule = schedule => {\n      var scheduleData = schedule.toObject();\n\n      // check if schedule exists already locally since the local array has the whole DB\n      var doesExist = false;\n      for (var i = 0; i < this.schedules.length; i++) {\n        if (this.schedules[i].name === schedule.name) {\n          doesExist = true;\n        }\n      }\n      database.collection(\"schedules\").add(scheduleData).then(docRef => {\n        console.log(\"added a schedule with the ID: \", docRef.id);\n        // add the DB id to the schedule\n        schedule.createID(docRef.id);\n\n        // add to AppModel\n        this.schedules.push(schedule);\n      }).catch(error => {\n        console.log(\"Error adding schedule: \", error);\n      });\n    };\n    // remove from database, if successful, remove from AppModel.\n    this.removeSchedule = id => {\n      // still need to code\n      database.collection(\"schdules\").doc(id).delete().then(() => {\n        console.log(\"Schedule deleted successfully!\");\n      }).catch(error => {\n        console.log(\"Error deleting schedule: \", error);\n      });\n    };\n    // for testing purposes\n    this.logScheduleData = () => {\n      for (var i = 0; i < this.schedules.length; i++) {\n        const schedule = this.schedules[i];\n        console.log(\"current schedule: \", schedule.name);\n        console.log(\"its courses: \", schedule.courses);\n      }\n    };\n    this.schedules = [];\n    this._generateSchedules();\n  }\n\n  // helper function for instantiating the AppModel\n  async _generateSchedules() {\n    // retrieving all of the collection\n    await database.collection(\"schedules\").get().then(querySnapshot => {\n      querySnapshot.forEach(doc => {\n        // print to check doc data with id\n        // console.log(doc.id, \" => \", doc.data);\n\n        // grab the schedule data\n        const scheduleData = doc.data();\n\n        // checking courses exist\n        // console.log(\"The scheduleData\", doc.data());\n\n        // create new schedule from data\n        // const schedule = new Schedule(scheduleData.name, scheduleData.courses);\n        const schedule = new Schedule(scheduleData.name, []);\n        schedule.createID(doc.id);\n        // check that the object was made\n        // console.log(\"making sure the schedule got made\", schedule);\n\n        // get courses and create them\n        scheduleData.courses.forEach(courseData => {\n          const newCourse = new Course(courseData.courseName, courseData.courseCode, courseData.sectionNumber, courseData.creditHours, courseData.meetFrequencies, courseData.meetTime, courseData.meetingRoom, courseData.professor);\n\n          // add each course to the schedule\n          schedule.addCourse(newCourse);\n\n          // console.log(\"the created schedule object: \", schedules[0]);\n        });\n        // add schedule to the AppModel\n        this.schedules.push(schedule);\n      });\n    }).catch(error => {\n      console.log(\"This error occurred grabbing documents: \", error);\n    });\n  }\n}\nexport default AppModel;","map":{"version":3,"names":["Course","Schedule","database","AppModel","constructor","getScheduleById","id","i","schedules","length","schedule","updateSchedule","console","log","toObject","scheduleRef","collection","doc","set","then","fromList","catch","error","addSchedule","scheduleData","doesExist","name","add","docRef","createID","push","removeSchedule","delete","logScheduleData","courses","_generateSchedules","get","querySnapshot","forEach","data","courseData","newCourse","courseName","courseCode","sectionNumber","creditHours","meetFrequencies","meetTime","meetingRoom","professor","addCourse"],"sources":["/Users/jordanchap20/Desktop/github/ScheduleSystem/scheduleSystem/src/JsModules/AppModel.js"],"sourcesContent":["// This file will contain two functions getSchedule and setSchedule\n// I will update Schedule to contain an ID.\n// Maybe I should just make a full app model here, it will be able to query into the database with getSchedule, createSchedule, and setSchedule methods\n// Okay so they have an ID, but I only can access the ID from the querySnapShot in _generateSchedules, so I could just add their ID to the class.\nimport Course from \"./Course\";\nimport Schedule from \"./Schedule\";\nimport { database } from \"../firebase\";\n\n// NOTE: All methods must follow arrow syntax to bind this.  This is determined at run time when handling events.\n// The manager of the Database and The UI\nclass AppModel {\n  constructor() {\n    this.schedules = [];\n    this._generateSchedules();\n  }\n\n  // helper function for instantiating the AppModel\n  async _generateSchedules() {\n    // retrieving all of the collection\n    await database\n      .collection(\"schedules\")\n      .get()\n      .then((querySnapshot) => {\n        querySnapshot.forEach((doc) => {\n          // print to check doc data with id\n          // console.log(doc.id, \" => \", doc.data);\n\n          // grab the schedule data\n          const scheduleData = doc.data();\n\n          // checking courses exist\n          // console.log(\"The scheduleData\", doc.data());\n\n          // create new schedule from data\n          // const schedule = new Schedule(scheduleData.name, scheduleData.courses);\n          const schedule = new Schedule(scheduleData.name, []);\n          schedule.createID(doc.id);\n          // check that the object was made\n          // console.log(\"making sure the schedule got made\", schedule);\n\n          // get courses and create them\n          scheduleData.courses.forEach((courseData) => {\n            const newCourse = new Course(\n              courseData.courseName,\n              courseData.courseCode,\n              courseData.sectionNumber,\n              courseData.creditHours,\n              courseData.meetFrequencies,\n              courseData.meetTime,\n              courseData.meetingRoom,\n              courseData.professor\n            );\n\n            // add each course to the schedule\n            schedule.addCourse(newCourse);\n\n            // console.log(\"the created schedule object: \", schedules[0]);\n          });\n          // add schedule to the AppModel\n          this.schedules.push(schedule);\n        });\n      })\n      .catch((error) => {\n        console.log(\"This error occurred grabbing documents: \", error);\n      });\n  }\n\n  // return a schedule from the list by querying for its ID\n  getScheduleById = (id) => {\n    for (var i = 0; i < this.schedules.length; i++) {\n      var schedule = this.schedules[i];\n      if (schedule.id === id) {\n        return schedule;\n      }\n    }\n  };\n\n  // query with id, replace with new schedule, if successful, update in AppModel\n  updateSchedule = (id, schedule) => {\n    console.log(schedule.toObject());\n    console.log(id);\n    const scheduleRef = database.collection(\"schedules\").doc(id);\n\n    scheduleRef\n      .set(schedule.toObject())\n      .then(() => {\n        console.log(\"successfully updated schedule\");\n\n        // update AppModel\n        for (var i = 0; i < this.schedules.length; i++) {\n          var fromList = this.schedules[i];\n          if (fromList.id === schedule.id) {\n            this.schedules[i] = schedule;\n          }\n        }\n      })\n      .catch((error) => {\n        console.error(\"Error replacing schedule in Firestore: \", error);\n      });\n  };\n\n  // add a schedule to the database, and to this instance if successful.\n  addSchedule = (schedule) => {\n    var scheduleData = schedule.toObject();\n\n    // check if schedule exists already locally since the local array has the whole DB\n    var doesExist = false;\n    for (var i = 0; i < this.schedules.length; i++) {\n      if (this.schedules[i].name === schedule.name) {\n        doesExist = true;\n      }\n    }\n\n    database\n      .collection(\"schedules\")\n      .add(scheduleData)\n      .then((docRef) => {\n        console.log(\"added a schedule with the ID: \", docRef.id);\n        // add the DB id to the schedule\n        schedule.createID(docRef.id);\n\n        // add to AppModel\n        this.schedules.push(schedule);\n      })\n      .catch((error) => {\n        console.log(\"Error adding schedule: \", error);\n      });\n  };\n\n  // remove from database, if successful, remove from AppModel.\n  removeSchedule = (id) => {\n    // still need to code\n    database\n      .collection(\"schdules\")\n      .doc(id)\n      .delete()\n      .then(() => {\n        console.log(\"Schedule deleted successfully!\");\n      })\n      .catch((error) => {\n        console.log(\"Error deleting schedule: \", error);\n      });\n  };\n\n  // for testing purposes\n  logScheduleData = () => {\n    for (var i = 0; i < this.schedules.length; i++) {\n      const schedule = this.schedules[i];\n      console.log(\"current schedule: \", schedule.name);\n      console.log(\"its courses: \", schedule.courses);\n    }\n  };\n}\n\nexport default AppModel;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}